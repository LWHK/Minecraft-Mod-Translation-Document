# Minecraft 模组翻译：专业翻译工具简介

本教程专注于专业的翻译软件使用。请注意，本教程默认读者已经阅读过基础教程，若在阅读本文时有任何无法理解处，请回到基础教程《Minecraft 模组翻译：从入门到开发》，仔细阅读相关章节，再回到本篇教程。

## 进阶工具
vsc虽好，但总归不是专门用于翻译的软件。对于译者而言，最理想的情况就是拿到文本就开始翻译，不用考虑别的。有些刚涉及模组翻译，还没有承接过大项目的人可能会问：难道我们平常不就是这样吗？直接从模组文件中找出对应的英文文件，然后开始翻译，其中并无多少的曲折啊？然而当你打算长期维护一个项目的时候，vsc的问题就会暴露出来的：
1. 有时，某个版本可能是过渡版本，你并不打算翻译，只是将其先行搁置。然而当你再次想起这个项目时，你已经忘了你最后翻译的译本的对应模组版本，因而你也不知道英文文件中的长文本是否有改动，改动了哪些。如果你是半路接手某个项目，而且没有项目交接，那么这个问题几乎是必定遇到。
2. 当你长期跟进一个项目时，忘记其中的某个术语再正常不过了，尤其是你同时还在跟进其他的情况下，这种现象尤为严重。为了解决这样的问题，你必须回过头搜索一下之前的这个术语，看看自己将它翻译为了什么。
3. 你维护的项目可能是一个整合包，其中涉及了大量的模组以及译名，你根本不可能全部记忆下来，对于那些不熟悉的模组，你只能挨个翻阅语言文件，甚至有时候，你还得去CFPA的仓库寻找，因为某些译者并不愿意或是不能将汉化提交到官方仓库，只能转而放到CFPA处。
4. 某些模组的文本格式比较复杂，或是文本量比较多。你在翻译的时候，手一会得在键盘上打字，一会得用鼠标选定文本，一两次还好，次数多了就会觉得非常麻烦。
5. 某些文本涉及到大量的重复工作，比如原版颜色，比如某些家具模组的大量重复单词等，这些你得手动替换，也是比较麻烦。而且有的时候，你得连续遇见了两三次同一个单词的时候，才会意识到你需要批量替换这一单词，一想到自己重复劳动了那么几下，虽然没什么体力成本，但总觉得心理上不舒服。
6. 在跟进某些更新较快且有指导书的模组时，偶尔会出现指导书语言文件大幅重排或是大量添加的情况。因为指导书的格式各不相同，因而没有一个统一的工具来节省你重排和复制粘贴的功夫。每次这种事情发生，都会消耗掉译者大量的时间。

以上种种，我认为对于任何接触了mcmod翻译的人员来说，都或多或少的遇到过。究其原因，不是因为我们自身的业务能力不过关，而是因为vsc从本质上来说就**不是一个翻译软件**，它用来文本编辑，用来写代码，都是可以的，实际上这些就是它的本职工作。但是它不能够在你忘记某些术语的时候贴心地为你跳出之前翻译过的术语，它也不能够为你省下反复挪手的力气，你依然得一上一下。那么，是否有这样的一种软件，能够解决这些痛点呢？那自然是有的，这类软件叫做CAT（Computer-Aided Translation）软件。

CAT软件有很多，本教程不一一举例，这里仅介绍 CAT 软件中的老大哥——Trados。我会在下文中通过实操的方式来讲解此软件的用法，

### 用于翻译高版本的 json 格式语言文件
首先我们需要准备如下的东西：
1. 主角 Trados，找个破解版的，正版的你买不起
2. 嘉宾某模组，用于提供素材

如何安装 Trados 此处按下不表，能看到这篇文章的至少应该有互联网冲浪的经验，建议自己解决。
接下来把模组文件中的英文语言文件拿出备用。注意，你需要校对一下该文件的格式：用vsc打开，把里面重复的key删除。通过vsc格式校验的json文件，名字是正常白色，如果是黄色或是红色说明依然没有通过。

#### 配置项目并翻译

接下来，打开 Trados，你会看到如下的界面：
![](images/2022-10-31-10-57-39.png)

这个时候，你就可以进行翻译了，将刚刚准备的文件拖入其中，并选择创建新项目→创建本地项目
![](images/2022-10-31-11-02-38.png)

然后便会进入到如下的界面中：
![](images/2022-10-31-11-06-21.png)

设置完成后，点击下一步：
![](images/2022-10-31-11-07-46.png)

再下一步：
![](images/2022-10-31-11-10-59.png)
![](images/2022-10-31-11-13-07.png)

点击创建后，设置你的翻译记忆库（待会会专门分出章节来介绍），这一步非常重要，一定要留心：
![](images/2022-10-31-11-14-44.png)

第二步跳过，来到第三步：
![](images/2022-10-31-11-16-55.png)

最后点击完成即可。

接下来是术语库，术语库同样需要你去创建：
![](images/2022-10-31-11-08-46.png)
![](images/2022-10-31-11-21-16.png)

成品：
![](images/2022-10-31-11-22-03.png)

然后一直点击下一步，最后点击完成。
自此，翻译记忆库以及术语的选定就都完成了。这时你会跳转回项目设置，直接点完成就好。当然，我建议有能力的译者可以点击下一步，看看后面的那些选项是干什么的，除了云翻译记忆库外，其他的步骤或多或少都有用，只是此处为新手教程，用不到罢了。

点击完成后关闭，软件会跳转到“项目”视图（左下角为会显示目前你在哪个视图）：
![](images/2022-10-31-11-27-29.png)

双击进入到项目中，便会来到“文件”视图，再次点击，就会跳转到“编辑器”视图：
![](images/2022-10-31-11-29-00.png)
![](images/2022-10-31-11-30-37.png)

试输入：
![](images/2022-10-31-11-32-26.png)

如果你确定这一翻译无误，那么只需按下Ctrl+Enter，就可以将此句段的状态更改为“已翻译”，并跳转到下一未确定句段：
![](images/2022-10-31-11-33-53.png)

#### 过滤非全读取情况下的json文件并进行翻译
因为json文件的泛用性，所以trados可以极佳地兼容高版本模组的语言文件，只需稍作处理，就能导入到trados内翻译。但这里就出现了一个问题：对于模组提供的语言文件来说，其内基本所有内容都需要翻译；但并不是所有需要翻译的json文件，其内的每行都需要翻译，比如帕秋莉模组的json文件，或是一些模组自己搓的书籍json，这些文件中几乎大半的行都不需要翻译，只有少部分的text需要翻译。那么我们需要如何使用trados处理这样的文件呢？这里便需要我们使用到新的工具——[JSON路径](https://www.cnblogs.com/reroyalup/p/13283300.html)。

拥有了这个工具，我们就可以在trados内对json文件过滤，滤掉不需要的行，只选择需要的行。现举一例（相关文件放在隔壁文件夹）：

1. 首先我们可以肯定，en_us.json文件内的所有行均可以翻译，关键问题是对en_us_guide.json的处理，可以看到：

![](images/2022-11-14-23-30-53.png)

只有用红线标记的地方才需要翻译，其余行均为格式行，不能翻译，甚至不能修改，那么首先我们可以对其做最最基本的分析：通篇看下来，所有的翻译对象的key不外乎"text"和“value”，那么，我们只需要简单地过滤一下，将所有对应的key摘出，即可完成。我们首先新建一个项目，加入文件en_us_guide.json，完成相关设置后，跳转到第八步“汇总”，然后点击“全部项目设置”：

![](images/2022-11-14-23-51-44.png)

然后找到“文件类型”：

![](images/2022-11-14-23-52-56.png)

然后再找到“JSON”：

![](images/2022-11-14-23-53-32.png)

再依次点击：

![](images/2022-11-14-23-54-01.png)

即可写入过滤规则。按照我们之前的分析，只需过滤出其中key为“text”和“value”的键值对即可，那么我们需要写入如下两条过滤：
`$..value`
`$..text`

![](images/2022-11-15-18-48-25.png)

即可顺利地读取出guide文件内的需要翻译的行，以下是效果：

![](images/2022-11-15-18-50-44.png)


2. 然而，我们的这一过滤只能处理guide文件，模组的lang语言文件很明显是不能这样处理的，我们必须找到能够同时读取出lang文件以及guide文件的过滤规则集合，毕竟这两个文件同属于一个模组，若是分开成两个项目不是很方便管理。
在写出多规则之前，我们需要了解trados读取JSON路径的顺序。当你在json文件类型的解析器中写入过滤后，trados会尝试从最下面的一条规则开始读取，然后逐一向上依次读取。这意味着，你需要把最普适的规则放在下面，然后再将进一步的过滤放在上方。
有了这一知识，我们不难想到一个最简单的过滤方法：先将所有的行选出，然后再将不需要的行选出，将其设置为不可翻译。
以下是一个例子：

![](images/2022-11-15-19-22-47.png)

只要你将文件中所有不需要的key依次剔除，即可完成过滤，

然而，这种方法一听就知道工作量比较大，所以我们最好通过取巧的方式来过滤，而不是暴力枚举。我们可以使用如下的过滤规则


`$.version` 不可翻译
`$..value`  可翻译
`$..text`   可翻译
`$.*`       可翻译

下面是解释的环节：首先，最下方的过滤针对的是lang文件，这里的意思是只读取根节点下的第一级key的value。这一规则应用于lang和guide后，只有lang文件会成功返回value，而guide文件返回的仍然是键值对。若是过滤返回了键值对，trados会直接舍弃掉这些键值对，因而整个guide文件唯一能够读取的行就只有最后一行：
`"version": "1.7.1.9"`
中间两行的读取与上文一样，此处不表，最上面一条针对的是guide内的多余的行。
至此，你便能给完美地读取这两个文件了。



### 读取非json文件并翻译

有读者已经意识到了，mcmod的语言文件的格式并不是只有json这一种：低版本模组的lang格式，一些模组会用到的XML格式，任务书的snbt格式；如果是整合包，还得包括crt所使用的zs脚本，kubejs的js文件，甚至还有groovy等文件。总之，这里所谈及的文件格式有些原生trados便能够处理，有些则不能，例如.lang文件，这玩意只有mc在用，trados自然不可能会为其添加支持。
但这并非意味着trados不能处理这些文件，上文中我们提到了“文件类型”选项卡，细心且实操过的读者肯定发现了，traods不仅支持极多的文件类型，还提供了自定义读取文件的方法，这意味着，我们只需要稍加调教，就能够使用trados读取这些文件并翻译。

首先，我们来看使用得最多得.lang文件：

1. 首先还是创建项目，并导入一份.lang文件，与上文的操作基本类似。
2. 然后到第八步，依次点击进入到文件类型，此时再点击如下按钮：![](images/2022-11-15-23-18-33.png)
3. 进入后，修改窗口内的内容：![](images/2022-11-15-23-21-33.png)
4. 依次点击并输入：![](images/2022-11-15-23-24-44.png)

此处需要做出一些解释：在这里，我们将标点符号“=”视为开头，每行的结尾（即“$”，此处是正则语法）作为结尾，过滤出了每行需要翻译的内容。
至此，就非常简单地完成了对lang文件的读取并翻译。
依照此方法，你可以顺利地处理其余的文件，将它们读取到trados内并开始翻译。


### 翻译记忆库（TM），术语库以及Trados的各类工具
